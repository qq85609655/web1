<div class="content-header nav_tab">
  <a class="btn-back" (click)="goback()"><em></em>返回</a>
  <ol class="breadcrumb">
    <li>数据共享交换</li>
    <li>数据源管理</li>
    <li class="active">{{getOperName()}}</li>
  </ol>
</div>

<div class="content-meta-treehide">
  <div class="Countrymeta-add">
    <dl>
      <dt><em>*</em>数据源名称：</dt>
      <dd>
        <input type="text" maxlength="20" [(ngModel)]="dataSource.name" [ngClass]="{error: valid.dataSource.name.status}" [disabled]="checkDisabled(false)"/>
      </dd>
      <dt>
        <em>*</em>数据库类型：</dt>
      <dd>
        <p-dropdown length="equate" [options]="dbTypeList" [(ngModel)]="dataSource.dbType" [ngClass]="{error: valid.dataSource.dbType.status}"
                    placeholder="请选择" (onChange)="onDbtypeChange()" [disabled]="checkDisabled(true)"></p-dropdown>
      </dd>
    </dl>
    <dl>
      <dt><em>*</em>数据库名称：</dt>
      <dd>
        <input type="text" maxlength="30" [(ngModel)]="dataSource.dbName" [ngClass]="{error: valid.dataSource.dbName.status}" [disabled]="checkDisabled(true)"/>
      </dd>
      <dt><em>*</em>IP地址：</dt>
      <dd>
        <input type="text" maxlength="30" [(ngModel)]="dataSource.host" [ngClass]="{error: valid.dataSource.host.status}" [disabled]="checkDisabled(true)"/>
      </dd>
    </dl>
    <dl *ngIf="dataSource.dbType == 2">
      <dt>数据表空间：</dt>
      <dd>
        <input type="text" maxlength="30" [(ngModel)]="dataSource.tableSpaces" [ngClass]="{error: valid.dataSource.tableSpaces.status}" [disabled]="checkDisabled(true)"/>

      </dd>
      <dt>索引表空间：</dt>
      <dd>
        <input type="text" maxlength="30" [(ngModel)]="dataSource.indexSpaces" [ngClass]="{error: valid.dataSource.indexSpaces.status}" [disabled]="checkDisabled(true)"/>
      </dd>
    </dl>
    <dl>
      <dt><em>*</em>端口：</dt>
      <dd>
        <input type="text" maxlength="5" [(ngModel)]="dataSource.port" [ngClass]="{error: valid.dataSource.port.status}" [disabled]="checkDisabled(true)"/>
      </dd>
      <dt><em>*</em>用户名：</dt>
      <dd>
        <input type="text" maxlength="30" [(ngModel)]="dataSource.username" [ngClass]="{error: valid.dataSource.username.status}" [disabled]="checkDisabled(true)"/>
      </dd>
    </dl>
    <dl>
      <dt><em>*</em>密码：</dt>
      <dd>
        <input type="text" maxlength="30" [(ngModel)]="dataSource.password" [ngClass]="{error: valid.dataSource.password.status}" [disabled]="checkDisabled(true)"/>
      </dd>
    </dl>
    <dl>
      <dt>数据源备注：</dt>
      <dd style="width: 80%">
        <textarea name="dataExplain" maxlength="60" [(ngModel)]="dataSource.remark" [disabled]="checkDisabled(true)"></textarea>
        <span>还剩{{getRestLength(dataSource.remark,60)}}</span>
      </dd>
    </dl>
  </div>
  <div class="btn-box">
    <button class="btn-test" (click)="toTestOk()">测试连接</button>
    <button class="btn-save" (click)="toSaveOk()" *ngIf="operType < 3">保存</button>
    <button class="btn-cancel" (click)="goback()">取消</button>
    <label *ngIf="operType == 1">
      <input type="checkbox" [(ngModel)]="continueAdd">保存后继续增加
    </label>
  </div>
</div>
